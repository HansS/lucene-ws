<?xml version="1.0"?>
<project name="lucene-ws" default="all" basedir=".">

    <property name="project.name"    value="lucene-ws" />
    <property name="project.version" value="1.0" />

    <path id="lib.class.path">
        <fileset dir="lib">
            <include name="**/*.jar"/>
        </fileset>
        <pathelement location="build"/>
    </path>

    <target name="all" depends="clean,prepare,compile,javadoc,package" />

    <target name="clean">
        <delete dir="build" />
        <delete dir="dist" />
    </target>

    <target name="prepare">
        <mkdir dir="build" />
    </target>

    <target name="compile" depends="prepare">
        <javac srcdir="src" destdir="build" debug="on" optimize="off" deprecation="on">
            <classpath>
                <path refid="lib.class.path" />
            </classpath>
        </javac>
    </target>

    <target name="javadoc" depends="compile">
        <mkdir dir="dist/javadoc" />
        <javadoc sourcepath="src" destdir="dist/javadoc" packagenames="*">
            <classpath>
                <path refid="lib.class.path" />
            </classpath>
        </javadoc>
    </target>

    <target name="package" depends="compile">
        <mkdir dir="dist" />
        <war destfile="dist/${project.name}-${project.version}.war" webxml="conf/web.xml">
            <classes dir="build" />
            <lib dir="lib">
                <exclude name="servlet-api-2.5-6.0.2.jar" />
            </lib>
        </war>
    </target>

</project>
