<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd">
<beans>

	<bean id="service" class="net.lucenews3.DefaultService">
		<property name="indexRepository" ref="indexRepository" />
	</bean>

	<bean id="indexRepository" class="net.lucenews3.FileSystemIndexRepository">
		<property name="directory" value="/home/adam/indexes" />
	</bean>



	<!-- Controllers -->

	<bean id="controller" abstract="true">
		<property name="service" ref="service" />
	</bean>

	<bean id="getServiceController" class="net.lucenews3.controller.ServiceGetController" parent="controller">
	</bean>

	<bean id="createIndexController" class="net.lucenews3.controller.IndexCreateController" parent="controller">
	</bean>

	<bean id="getIndexPropertiesController" class="net.lucenews3.controller.IndexPropertiesGetController" parent="controller">
	</bean>

	<bean id="getServicePropertiesController" class="net.lucenews3.controller.ServicePropertiesGetController" parent="controller">
	</bean>

	<bean id="searchIndexController" class="net.lucenews3.controller.IndexSearchController" parent="controller">
	</bean>

	<bean id="createDocumentController" class="net.lucenews3.controller.DocumentCreateController" parent="controller">
	</bean>

	<bean id="getDocumentController" class="net.lucenews3.controller.DocumentGetController" parent="controller">
	</bean>



	<!-- Handler mappings -->
	<bean id="handlerMapping" class="net.lucenews3.ResourceHandlerMapping">
		<property name="serviceHandlerMapping"           ref="serviceHandlerMapping" />
		<property name="servicePropertiesHandlerMapping" ref="servicePropertiesHandlerMapping" />
		<property name="indexHandlerMapping"             ref="indexHandlerMapping" />
		<property name="indexPropertiesHandlerMapping"   ref="indexPropertiesHandlerMapping" />
		<property name="documentHandlerMapping"          ref="documentHandlerMapping" />
	</bean>

	<bean id="serviceHandlerMapping" class="net.lucenews3.RequestMethodHandlerMapping">
		<property name="getHandlerMapping">
			<bean class="net.lucenews3.ControllerHandlerMapping">
				<property name="controller" ref="getServiceController" />
			</bean>
		</property>
		<property name="postHandlerMapping">
			<bean class="net.lucenews3.ControllerHandlerMapping">
				<property name="controller" ref="createIndexController" />
			</bean>
		</property>
		<!--
		<property name="putHandlerMapping"    ref="" />
		<property name="deleteHandlerMapping" ref="" />
		-->
	</bean>

	<bean id="servicePropertiesHandlerMapping" class="net.lucenews3.RequestMethodHandlerMapping">
		<property name="getHandlerMapping">
			<bean class="net.lucenews3.ControllerHandlerMapping">
				<property name="controller" ref="getServicePropertiesController" />
			</bean>
		</property>
		<!--
		<property name="postHandlerMapping"   ref="" />
		<property name="putHandlerMapping"    ref="" />
		<property name="deleteHandlerMapping" ref="" />
		-->
	</bean>

	<bean id="indexHandlerMapping" class="net.lucenews3.RequestMethodHandlerMapping">
		<property name="getHandlerMapping">
			<bean class="net.lucenews3.ControllerHandlerMapping">
				<property name="controller" ref="searchIndexController" />
			</bean>
		</property>
		<property name="postHandlerMapping">
			<bean class="net.lucenews3.ControllerHandlerMapping">
				<property name="controller" ref="createDocumentController" />
			</bean>
		</property>
		<!--
		<property name="putHandlerMapping"    ref="" />
		<property name="deleteHandlerMapping" ref="" />
		-->
	</bean>

	<bean id="indexPropertiesHandlerMapping" class="net.lucenews3.RequestMethodHandlerMapping">
		<property name="getHandlerMapping">
			<bean class="net.lucenews3.ControllerHandlerMapping">
				<property name="controller" ref="getIndexPropertiesController" />
			</bean>
		</property>
		<!--
		<property name="postHandlerMapping"   ref="" />
		<property name="putHandlerMapping"    ref="" />
		<property name="deleteHandlerMapping" ref="" />
		-->
	</bean>

	<bean id="documentHandlerMapping" class="net.lucenews3.RequestMethodHandlerMapping">
		<property name="getHandlerMapping">
			<bean class="net.lucenews3.ControllerHandlerMapping">
				<property name="controller" ref="getDocumentController" />
			</bean>
		</property>
		<!--
		<property name="postHandlerMapping"   ref="" />
		<property name="putHandlerMapping"    ref="" />
		<property name="deleteHandlerMapping" ref="" />
		-->
	</bean>



	<bean class="net.lucenews3.DefaultHandlerExceptionResolver">
	</bean>

	<!-- Views -->

	<bean id="view" abstract="true">
	</bean>

	<bean id="xmlView" abstract="true" parent="view" />

	<bean id="introspectionView" class="net.lucenews3.APPIntrospectionView" parent="view">
		<property name="service" ref="service" />
	</bean>

	<bean id="openSearchResponseView" class="net.lucenews3.OpenSearchResponseView" parent="view">
	</bean>

	<bean id="documentView" class="net.lucenews3.DocumentXMLView" parent="view">
	</bean>

	<bean id="propertiesView" class="net.lucenews3.PropertiesXMLView" parent="xmlView">
	</bean>

	<bean id="exceptionView" class="net.lucenews3.ExceptionView" parent="xmlView">
	</bean>

	<bean id="viewResolver" class="net.lucenews3.DefaultViewResolver">
		<property name="viewsByName">
			<map>
				<entry key="service/get" value-ref="introspectionView" />
				<entry key="search/results" value-ref="openSearchResponseView" />
				<entry key="document/get" value-ref="documentView" />
				<entry key="serviceProperties/get" value-ref="propertiesView" />
				<entry key="indexProperties/get" value-ref="propertiesView" />
				<entry key="error" value-ref="exceptionView" />
			</map>
		</property>
	</bean>

</beans>